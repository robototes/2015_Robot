function NetworkTable(m,z,A){var n=m+"/",g={},l=function(){},v=l;m=function(){var b=chrome.sockets.tcp,c;return{create:function(){b.create({},function(a){c=a.socketId})},connect:function(a,d,e){e=e||l;b.connect(c,a,d,function(){e()})},send:function(a){try{b.send(c,a,l)}catch(d){}},onReceive:function(a){b.onReceive.addListener(a)},isConnected:function(a){c||a(!1);return b.getInfo(c,function(b){a(b.connected)})}}}();var h=A||m;h.create();var B=function(b,c,a,d){this.name=b;this.value=c;this.type=a;
this.sequence=d||0},w=function(b){var c=new ArrayBuffer(b.length),a=new DataView(c),d=0,e;for(e in b.packets){var f=b.packets[e];switch(f.type){case "b":a.setInt8(d,f.data);d+=1;break;case "i16":a.setInt16(d,f.data);d+=2;break;case "i32":a.setInt32(d,f.data);d+=4;break;case "d":a.setFloat64(d,f.data),d+=8}}h.send(c)},x=function(b,c){for(var a=(new Uint8Array(b))[c-2]-1,d=c+a,e=new Uint8Array(b.slice(c,d)),f="",g=0;g<e.length;g++)f+=String.fromCharCode(e[g]);return{string:f,length:a,end:d}},y=function(b,
c,a){var d=new Uint8Array(b),e,f;switch(a){case 0:f=1===d[c];e=c+1;break;case 1:b=q(b,c,8);f=(new Float64Array(b.slice(c,c+8)))[0];e=c+8;break;case 2:b=x(b,c),f=b.string,e=b.end}return{value:f,end:e}},q=function(b,c,a){var d=Array(a);b=new Uint8Array(b);for(var e=0;e<a;e++)d[a-1-e]=b[e+c];b.set(d,c);return b.buffer},r=function(b){for(var c=[],a=0;a<b.length;a++)c.push(b.charCodeAt(a));return c},s=function(){h.isConnected(function(b){b||console.log("Not connected.")})},k=function(b){for(var c in g)if(g[c].name===
b)return c;return-1};h.onReceive(function(b){try{a:{var c=0,a=b.data;do{var a=a.slice(c),d=new Uint8Array(a);switch(d[0]){case 3:break a;case 16:var e=x(a,4),f=e.string,h=e.end,k=h+5,m=d[h],l=q(q(a.slice(h+1,h+5),0,2),2,2),t=new Uint16Array(l),p=t[0],r=t[1],u=y(a,k,m);0===f.indexOf(n)&&(g[p]=new B(f,u.value,m,r));c=u.end;break;case 17:l=q(q(a.slice(1,5),0,2),2,2),t=new Uint16Array(l),p=t[0],k=5,g[p]&&(u=y(a,k,g[p].type),g[p].value=u.value,g[p].sequence=t[1]),c=u.end}}while(void 0!==d[c]);v()}}catch(s){console.log(s)}});
return{get:function(b,c){var a=k(n+b);return 0<=a?g[a].value:c},set:function(b,c){if(0<=k(n+b)){var a=n+b;s();var d=k(a),a={length:1,packets:[{type:"b",data:17}]};a.packets.push({type:"i16",data:d});a.packets.push({type:"i16",data:++g[d].sequence});a.length+=4;switch(typeof c){case "boolean":a.packets.push({type:"b",data:c?1:0});a.length+=1;break;case "number":a.packets.push({type:"d",data:c});a.length+=8;break;case "string":d=c.length;a.length+=d;a.packets.push({type:"i16",data:d});for(var e=r(c),
f=0;f<d;f++)a.packets.push({type:"b",data:e[f]}),a.length+=1}}else{e=n+b;s();a={length:3,packets:[{type:"b",data:16}]};d=e.length;a.length+=d+1;a.packets.push({type:"i16",data:d+1});a.packets.push({type:"b",data:47});e=r(e);for(f=0;f<d;f++)a.packets.push({type:"b",data:e[f]});switch(typeof c){case "boolean":a.packets.push({type:"b",data:0});break;case "number":a.packets.push({type:"b",data:1});break;case "string":a.packets.push({type:"b",data:2})}a.length+=5;a.packets.push({type:"i16",data:65535});
a.packets.push({type:"i16",data:0});switch(typeof c){case "boolean":a.packets.push({type:"b",data:c?1:0});a.length+=1;break;case "number":a.packets.push({type:"d",data:c});a.length+=8;break;case "string":for(d=c.length,a.length+=d,a.packets.push({type:"i16",data:d}),e=r(c),f=0;f<d;f++)a.packets.push({type:"b",data:e[f]}),a.length+=1}}w(a)},setCallback:function(b){v=b},connect:function(){s();h.connect(z,1735,function(){w({length:3,packets:[{type:"b",data:1},{type:"i16",data:512}]})})},isConnected:function(b){h.isConnected(b)},
getTypeAndID:function(b){b=k(n+b);return{type:g[b].type,id:b}}}};
